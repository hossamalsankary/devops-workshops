# Kubernetes Diagram Descriptions

## Key Components Diagram
```
+------------------------------------------------------------+
|                     Kubernetes Cluster                     |
|                                                            |
|  +------------------+      +------------------------+      |
|  |     Namespace    |      |        Namespace       |      |
|  |  (e.g. default)  |      |     (e.g. kube-system) |      |
|  |                  |      |                        |      |
|  |  +------------+  |      |  +---------------+     |      |
|  |  | Deployment |  |      |  |   Deployment  |     |      |
|  |  |            |  |      |  |               |     |      |
|  |  |  +------+  |  |      |  |   +------+    |     |      |
|  |  |  |ReplicaSet|  |      |  |   |ReplicaSet |     |      |
|  |  |  |      |  |  |      |  |   |        |  |     |      |
|  |  |  | Pod  |  |  |      |  |   | Pod    |  |     |      |
|  |  |  +------+  |  |      |  |   +------+    |     |      |
|  |  +------------+  |      |  +---------------+     |      |
|  |                  |      |                        |      |
|  |  +------------+  |      |  +---------------+     |      |
|  |  |  Service   |  |      |  |     Service    |    |      |
|  |  +------------+  |      |  +---------------+     |      |
|  +------------------+      +------------------------+      |
+------------------------------------------------------------+
```

## Basic Terminology Diagram
```
+------------------------------------------------------------+
|                     Kubernetes Cluster                     |
|                                                            |
|  +------------------+      +------------------------+      |
|  |    Node 1        |      |        Node 2         |      |
|  | (Worker Node)    |      |     (Worker Node)     |      |
|  |                  |      |                        |      |
|  |  +------------+  |      |  +---------------+     |      |
|  |  |    Pod     |  |      |  |      Pod      |     |      |
|  |  |            |  |      |  |               |     |      |
|  |  | Container 1|  |      |  | Container 1   |     |      |
|  |  | Container 2|  |      |  | Container 2   |     |      |
|  |  +------------+  |      |  +---------------+     |      |
|  |                  |      |                        |      |
|  |  +------------+  |      |  +---------------+     |      |
|  |  |    Pod     |  |      |  |      Pod      |     |      |
|  |  +------------+  |      |  +---------------+     |      |
|  +------------------+      +------------------------+      |
|                                                            |
|                 Control Plane (Master Node)                |
|     +----------------+  +----------------+                 |
|     |  API Server    |  | Scheduler      |                 |
|     +----------------+  +----------------+                 |
|     |  etcd          |  | Controller Mgr |                 |
|     +----------------+  +----------------+                 |
+------------------------------------------------------------+
```

## Namespace Hierarchy
```
+------------------------------------------------------------+
|                     Kubernetes Cluster                     |
|                                                            |
|  +------------------+      +------------------------+      |
|  |  default         |      |     kube-system        |      |
|  |  Namespace       |      |     Namespace          |      |
|  |                  |      |                        |      |
|  |  App Resources   |      |  System Components     |      |
|  +------------------+      +------------------------+      |
|                                                            |
|  +------------------+      +------------------------+      |
|  |  kube-public     |      |     kube-node-lease    |      |
|  |  Namespace       |      |     Namespace          |      |
|  |                  |      |                        |      |
|  |  Public Resources|      |  Node Heartbeats       |      |
|  +------------------+      +------------------------+      |
|                                                            |
|  +------------------+      +------------------------+      |
|  |   dev            |      |        prod            |      |
|  |   Namespace      |      |      Namespace         |      |
|  |                  |      |                        |      |
|  | Dev Environment  |      |   Prod Environment     |      |
|  +------------------+      +------------------------+      |
+------------------------------------------------------------+
```

## Resource Quota
```
+-----------------------------------------------------+
|                    my-app Namespace                 |
|                                                     |
|   Resource Quota: my-quota                          |
|   +-------------------------------------------+     |
|   |                                           |     |
|   |  CPU: 4 cores (requests) / 8 cores (limits)     |
|   |  Memory: 4Gi (requests) / 8Gi (limits)    |     |
|   |  Pods: 20                                 |     |
|   |  Services: 10                             |     |
|   |  PVCs: 5                                  |     |
|   |                                           |     |
|   +-------------------------------------------+     |
|                                                     |
|   Resources Used:                                   |
|   +-------------------------------------------+     |
|   |                                           |     |
|   |  CPU: 2.5 cores (requests) / 5 cores (limits)   |
|   |  Memory: 3Gi (requests) / 6Gi (limits)    |     |
|   |  Pods: 12/20                              |     |
|   |  Services: 5/10                           |     |
|   |  PVCs: 2/5                                |     |
|   |                                           |     |
|   +-------------------------------------------+     |
+-----------------------------------------------------+
```

## Pod Structure
```
+-----------------------------------------------------+
|                        Pod                          |
|                                                     |
|   +-------------------------------------------+     |
|   |               Container 1                 |     |
|   | +---------------------------------------+ |     |
|   | |            Application               | |     |
|   | +---------------------------------------+ |     |
|   |                                           |     |
|   +-------------------------------------------+     |
|                                                     |
|   +-------------------------------------------+     |
|   |               Container 2                 |     |
|   | +---------------------------------------+ |     |
|   | |            Application               | |     |
|   | +---------------------------------------+ |     |
|   |                                           |     |
|   +-------------------------------------------+     |
|                                                     |
|   +-------------------------------------------+     |
|   |             Shared Volume                 |     |
|   +-------------------------------------------+     |
|                                                     |
|   +-------------------------------------------+     |
|   |           Shared Network Space            |     |
|   |               (IP Address)                |     |
|   +-------------------------------------------+     |
+-----------------------------------------------------+
```

## Pod Lifecycle
```
+-----------------------------------------------------+
|                   Pod Lifecycle                     |
|                                                     |
|  +------------+     +-----------+    +-----------+  |
|  |  Pending   | --> |  Running  | --> | Succeeded|  |
|  +------------+     +-----------+    +-----------+  |
|        |                  |                         |
|        |                  v                         |
|        |            +-----------+                   |
|        +----------> |   Failed  |                   |
|                     +-----------+                   |
|                          |                          |
|                          v                          |
|                     +-----------+                   |
|                     |  Unknown  |                   |
|                     +-----------+                   |
+-----------------------------------------------------+
```

## Pod Networking
```
+-----------------------------------------------------+
|                Kubernetes Cluster                   |
|                                                     |
| +-------------------+     +-------------------+     |
| |      Node 1       |     |      Node 2       |     |
| |                   |     |                   |     |
| | +---------------+ |     | +---------------+ |     |
| | |    Pod A      | |     | |    Pod C      | |     |
| | |  IP: 10.0.1.2 | |     | |  IP: 10.0.2.2 | |     |
| | +-------+-------+ |     | +-------+-------+ |     |
| |         |         |     |         |         |     |
| | +-------+-------+ |     | +-------+-------+ |     |
| | |    Pod B      | |     | |    Pod D      | |     |
| | |  IP: 10.0.1.3 | |     | |  IP: 10.0.2.3 | |     |
| | +---------------+ |     | +---------------+ |     |
| +-------------------+     +-------------------+     |
|           |                         |               |
|           +-------------------------+               |
|                       |                             |
|            +----------+---------+                   |
|            |  Cluster Network   |                   |
|            |   10.0.0.0/16      |                   |
|            +--------------------+                   |
+-----------------------------------------------------+
```

## Pod Storage
```
+-----------------------------------------------------+
|                        Pod                          |
|                                                     |
|   +-------------------------------------------+     |
|   |               Container                   |     |
|   | +---------------------------------------+ |     |
|   | |            Application               | |     |
|   | +---------------------------------------+ |     |
|   |                                           |     |
|   |   Mount: /data                            |     |
|   +----------------+------------------------+--+     |
|                    |                                 |
| +------------------v--------------------------+      |
| |              Volume (emptyDir)             |      |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| |       Persistent Volume Claim             |       |
| +-----------------+-------------------------+       |
|                   |                                 |
+-------------------v---------------------------------+
|              Persistent Volume                      |
+-----------------------------------------------------+
```

## Health Checks
```
+-----------------------------------------------------+
|                        Pod                          |
|                                                     |
|   +-------------------------------------------+     |
|   |               Container                   |     |
|   | +---------------------------------------+ |     |
|   | |            Application               | |     |
|   | +---------------------------------------+ |     |
|   |                                           |     |
|   | Health Checks:                            |     |
|   | +---------------------------------------+ |     |
|   | | Liveness Probe:  /healthz             | |     |
|   | | - Restarts container if it fails      | |     |
|   | +---------------------------------------+ |     |
|   |                                           |     |
|   | +---------------------------------------+ |     |
|   | | Readiness Probe: /ready               | |     |
|   | | - Removes Pod from Service endpoints  | |     |
|   | | - if it fails                         | |     |
|   | +---------------------------------------+ |     |
|   |                                           |     |
|   | +---------------------------------------+ |     |
|   | | Startup Probe: /startup              | |     |
|   | | - Disables other probes until success| |     |
|   | +---------------------------------------+ |     |
|   +-------------------------------------------+     |
+-----------------------------------------------------+
```

## Service Types
```
+-----------------------------------------------------+
|                Kubernetes Cluster                   |
|                                                     |
| +-------------------+                               |
| |   ClusterIP       |                               |
| |   Service         |                               |
| | (Internal Only)   |                               |
| +-------------------+                               |
|                                                     |
| +-------------------+     +-------------------+     |
| |   NodePort        |     |                   |     |
| |   Service         +---->| External Traffic  |     |
| | (Internal+Node IP)|     |                   |     |
| +-------------------+     +-------------------+     |
|                                                     |
| +-------------------+     +-------------------+     |
| |   LoadBalancer    |     |    External       |     |
| |   Service         +---->|   Load Balancer   |     |
| |(Internal+External)|     |                   |     |
| +-------------------+     +-------------------+     |
|                                                     |
| +-------------------+     +-------------------+     |
| |   ExternalName    |     |  External Service |     |
| |   Service         +---->| (DNS Resolution)  |     |
| |  (CNAME record)   |     |                   |     |
| +-------------------+     +-------------------+     |
+-----------------------------------------------------+
```

## Service Discovery
```
+-----------------------------------------------------+
|                Kubernetes Cluster                   |
|                                                     |
| +-------------------+     +-------------------+     |
| |      Pod A        |     |      Pod B        |     |
| |                   |     |                   |     |
| | DNS Lookup:       |     |                   |     |
| | my-service.ns.svc.|     |                   |     |
| | cluster.local     |     |                   |     |
| +--------+----------+     +---------+---------+     |
|          |                          |               |
|          v                          v               |
| +----------------------------------------------+    |
| |               CoreDNS Service               |    |
| +----------------------------------------------+    |
|          |                          |               |
|          v                          v               |
| +-------------------+     +-------------------+     |
| |    my-service     |     |  Endpoints        |     |
| |    Service        |     | (Pod IPs matched  |     |
| |  (ClusterIP)      |     |   by selectors)   |     |
| +-------------------+     +-------------------+     |
|          |                          |               |
|          v                          v               |
| +-------------------+     +-------------------+     |
| |      Pod C        |     |      Pod D        |     |
| |   (app=myapp)     |     |   (app=myapp)     |     |
| |                   |     |                   |     |
| | Target Pods       |     | Target Pods       |     |
| +-------------------+     +-------------------+     |
+-----------------------------------------------------+
```

## Service Best Practices
```
+-----------------------------------------------------+
|              Service Best Practices                 |
|                                                     |
| +-------------------------------------------+       |
| | ✅ Use Meaningful Names                   |       |
| | my-service vs svc1                        |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| | ✅ Set Appropriate Resource Requests      |       |
| | Prevents resource starvation              |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| | ✅ Use Namespaces for Isolation           |       |
| | Separating environments/teams             |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| | ✅ Implement Health Checks                |       |
| | Liveness and readiness probes             |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| | ✅ Use Labels and Annotations             |       |
| | Proper resource organization              |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| | ✅ Monitor and Clean Up Unused Resources  |       |
| | Prevent resource waste                    |       |
| +-------------------------------------------+       |
+-----------------------------------------------------+
```

## Deployment Architecture
```
+-----------------------------------------------------+
|               Deployment Architecture               |
|                                                     |
| +-------------------------------------------+       |
| |               Deployment                  |       |
| |                                           |       |
| | - Declarative Updates                     |       |
| | - Rolling Updates Strategy                |       |
| | - Rollback Capability                     |       |
| +------------------+------------------------+       |
|                    |                                |
|                    v                                |
| +-------------------------------------------+       |
| |              ReplicaSet                   |       |
| |                                           |       |
| | - Pod Template v1                         |       |
| | - Replica Count: 3                        |       |
| +------------------+------------------------+       |
|                    |                                |
|        +-----------+-----------+                    |
|        |                       |                    |
|        v                       v                    |
| +-------------+         +-------------+             |
| |    Pod 1    |         |    Pod 2    |             |
| +-------------+         +-------------+             |
|                                                     |
| +-------------------------------------------+       |
| | Deployment Update (v2)                    |       |
| +------------------+------------------------+       |
|                    |                                |
|                    v                                |
| +-------------------------------------------+       |
| |           New ReplicaSet                  |       |
| |                                           |       |
| | - Pod Template v2                         |       |
| | - Replica Count: 3                        |       |
| +------------------+------------------------+       |
|                    |                                |
|        +-----------+-----------+                    |
|        |                       |                    |
|        v                       v                    |
| +-------------+         +-------------+             |
| |    Pod 1    |         |    Pod 2    |             |
| | (new version)|         | (new version)|             |
| +-------------+         +-------------+             |
+-----------------------------------------------------+
```

## Deployment Strategies
```
+-----------------------------------------------------+
|               Deployment Strategies                 |
|                                                     |
| +-------------------------------------------+       |
| |         RollingUpdate Strategy           |       |
| |                                           |       |
| | Old Pods: [A] [A] [A] → [A] [A] [B]      |       |
| |            → [A] [B] [B] → [B] [B] [B]   |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| |          Recreate Strategy               |       |
| |                                           |       |
| | Old Pods: [A] [A] [A] → [ ] [ ] [ ]      |       |
| |            → [B] [B] [B]                 |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| |         Blue/Green Strategy              |       |
| |                                           |       |
| | Blue: [A] [A] [A] ← traffic              |       |
| | Green: [B] [B] [B]                       |       |
| |                                           |       |
| | Then switch traffic:                      |       |
| | Blue: [A] [A] [A]                        |       |
| | Green: [B] [B] [B] ← traffic             |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| |          Canary Strategy                 |       |
| |                                           |       |
| | [A] [A] [A] [A] [A] ← 90% traffic        |       |
| | [B] ← 10% traffic                        |       |
| |                                           |       |
| | Gradually increase:                       |       |
| | [A] [A] [A] ← 60% traffic                |       |
| | [B] [B] ← 40% traffic                    |       |
| +-------------------------------------------+       |
+-----------------------------------------------------+
```

## Rolling Update
```
+-----------------------------------------------------+
|                 Rolling Update                      |
|                                                     |
| Initial State (Version 1):                          |
| +-------+ +-------+ +-------+                       |
| | Pod A | | Pod A | | Pod A |                       |
| | v1    | | v1    | | v1    |                       |
| +-------+ +-------+ +-------+                       |
|                                                     |
| Step 1:                                             |
| +-------+ +-------+ +-------+                       |
| | Pod A | | Pod A | | Pod B |  ← New pod created    |
| | v1    | | v1    | | v2    |                       |
| +-------+ +-------+ +-------+                       |
|                                                     |
| Step 2:                                             |
| +-------+ +-------+ +-------+                       |
| | Pod A | | Pod B | | Pod B |  ← One old pod removed|
| | v1    | | v2    | | v2    |    one new pod added  |
| +-------+ +-------+ +-------+                       |
|                                                     |
| Final State (Version 2):                            |
| +-------+ +-------+ +-------+                       |
| | Pod B | | Pod B | | Pod B |  ← All pods updated   |
| | v2    | | v2    | | v2    |                       |
| +-------+ +-------+ +-------+                       |
|                                                     |
| Parameters:                                         |
| maxSurge: controls how many pods can be created     |
|           beyond the desired count                  |
| maxUnavailable: controls how many pods can be       |
|           unavailable during update                 |
+-----------------------------------------------------+
```

## ReplicaSet Structure
```
+-----------------------------------------------------+
|                 ReplicaSet Structure                |
|                                                     |
| +-------------------------------------------+       |
| |              ReplicaSet                   |       |
| |                                           |       |
| | - Pod Selector: app=nginx                 |       |
| | - Desired Replicas: 3                     |       |
| | - Pod Template:                           |       |
| |   * Container: nginx:latest               |       |
| |   * Port: 80                              |       |
| +------------------+------------------------+       |
|                    |                                |
|       +------------+------------+                   |
|       |            |            |                   |
|       v            v            v                   |
| +----------+  +----------+  +----------+            |
| |   Pod 1  |  |   Pod 2  |  |   Pod 3  |            |
| | app=nginx|  | app=nginx|  | app=nginx|            |
| +----------+  +----------+  +----------+            |
|                                                     |
| If a pod is deleted:                                |
|                    |                                |
|       +------------+------------+                   |
|       |            |            |                   |
|       v            v            v                   |
| +----------+  +----------+  +----------+            |
| |   Pod 1  |  |   Pod 4  |  |   Pod 3  |            |
| | app=nginx|  | app=nginx|  | app=nginx|            |
| +----------+  +----------+  +----------+            |
| (Pod 2 was deleted, Pod 4 was created to maintain 3 replicas) |
+-----------------------------------------------------+
```

## ReplicaSet vs ReplicationController
```
+-----------------------------------------------------+
|       ReplicaSet vs ReplicationController          |
|                                                     |
| +-------------------------------------------+       |
| |           ReplicaSet (Newer)              |       |
| |                                           |       |
| | - Supports set-based selectors:           |       |
| |   * matchLabels:                          |       |
| |       app: nginx                          |       |
| |                                           |       |
| |   * matchExpressions:                     |       |
| |       - {key: app, operator: In,          |       |
| |          values: [nginx, web]}            |       |
| |                                           |       |
| | - Used by Deployments                     |       |
| | - Recommended for new deployments         |       |
| +-------------------------------------------+       |
|                                                     |
| +-------------------------------------------+       |
| |     ReplicationController (Older)         |       |
| |                                           |       |
| | - Only supports equality-based selectors: |       |
| |   * app = nginx                           |       |
| |                                           |       |
| | - Cannot use more complex selectors       |       |
| | - Legacy resource (being phased out)      |       |
| +-------------------------------------------+       |
+-----------------------------------------------------+
```
